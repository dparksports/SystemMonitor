<Window x:Class="DeviceMonitorCS.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:DeviceMonitorCS"
        xmlns:views="clr-namespace:DeviceMonitorCS.Views"
        Title="Windows System Monitor" Height="700" Width="1100" WindowStartupLocation="CenterScreen"
        Background="#1E1E1E">
    <Window.Resources>
        <Style TargetType="DataGrid">
            <Setter Property="AutoGenerateColumns" Value="False"/>
            <Setter Property="CanUserAddRows" Value="False"/>
            <Setter Property="IsReadOnly" Value="True"/>
            <Setter Property="HeadersVisibility" Value="Column"/>
            <Setter Property="GridLinesVisibility" Value="Horizontal"/>
            <Setter Property="Background" Value="#252526"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="RowBackground" Value="#252526"/>
            <Setter Property="AlternatingRowBackground" Value="#2D2D30"/>
        </Style>
        <Style TargetType="Button" x:Key="NavButton">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Padding" Value="10,8"/>
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Margin" Value="0,2"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Left"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#3E3E42"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        <Style TargetType="CheckBox">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Margin" Value="10,5"/>
        </Style>
        <Style TargetType="GroupBox">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#3E3E42"/>
        </Style>
    </Window.Resources>
    
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="220"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Sidebar -->
        <Border Grid.Column="0" Background="#252526" BorderBrush="#3E3E42" BorderThickness="0,0,1,0">
            <StackPanel Margin="10">
                <TextBlock Text="SystemMonitor" FontSize="20" FontWeight="Bold" Foreground="Cyan" Margin="0,10,20,20">
                    <TextBlock.Effect>
                        <DropShadowEffect Color="Cyan" BlurRadius="10" ShadowDepth="0" Opacity="0.5"/>
                    </TextBlock.Effect>
                </TextBlock>

                <TextBlock Text="MAIN" Foreground="#808080" FontSize="12" Margin="5,0,0,5" FontWeight="SemiBold"/>
                <Button x:Name="NavDashboardBtn" Content="Dashboard" Style="{StaticResource NavButton}"/>
                <Button x:Name="NavLogsBtn" Content="Event Logs" Style="{StaticResource NavButton}"/>

                <TextBlock Text="TOOLS" Foreground="#808080" FontSize="12" Margin="5,20,0,5" FontWeight="SemiBold"/>
                <Button x:Name="HostedNetworkBtn" Content="Hosted Network" Style="{StaticResource NavButton}"/>
                <Button x:Name="WanMiniportBtn" Content="WAN Miniports" Style="{StaticResource NavButton}"/>
                <Button x:Name="NetworkAdaptersBtn" Content="Network Adapters" Style="{StaticResource NavButton}"/>
                <Button x:Name="TasksBtn" Content="Scheduled Tasks" Style="{StaticResource NavButton}"/>
                <Button x:Name="ConnectionsBtn" Content="Connections" Style="{StaticResource NavButton}"/>

                <TextBlock Text="QUICK ACTIONS" Foreground="#808080" FontSize="12" Margin="5,20,0,5" FontWeight="SemiBold"/>
                <CheckBox x:Name="VpnToggle" Content="VPN Services"/>
                <CheckBox x:Name="WifiDirectToggle" Content="WiFi Direct"/>
                <CheckBox x:Name="DebugToggle" Content="Kernel Debug"/>
                
                <Separator Background="#3E3E42" Margin="0,20"/>
                <Button x:Name="SettingsBtn" Content="Settings" Style="{StaticResource NavButton}"/>
                <Button x:Name="ClearBtn" Content="Clear Logs" Style="{StaticResource NavButton}" Foreground="#FF6B6B"/>
            </StackPanel>
        </Border>

        <!-- Content Area -->
        <Grid Grid.Column="1" Background="#1E1E1E">
            
            <!-- Dashboard View (Default) -->
            <local:DashboardView x:Name="DashboardView" Visibility="Visible"/>

            <!-- Logs / Old View -->
            <Grid x:Name="LogsView" Visibility="Collapsed">
                 <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="5"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                
                <!-- Top Pane: Device Events -->
                <GroupBox Grid.Row="0" Header="Device Events" Padding="5" Margin="10">
                    <DataGrid x:Name="DeviceGrid" Background="Transparent" BorderThickness="0">
                        <DataGrid.ContextMenu>
                            <ContextMenu>
                                <MenuItem Header="Ask AI about this" Click="AskAi_Click"/>
                            </ContextMenu>
                        </DataGrid.ContextMenu>
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Time" Binding="{Binding Time}" Width="80"/>
                            <DataGridTextColumn Header="Event" Binding="{Binding EventType}" Width="80"/>
                            <DataGridTextColumn Header="Device Name" Binding="{Binding Name}" Width="150"/>
                            <DataGridTextColumn Header="Type" Binding="{Binding Type}" Width="100"/>
                            <DataGridTextColumn Header="Initiator" Binding="{Binding Initiator}" Width="*"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </GroupBox>

                <!-- Resizable Splitter -->
                <GridSplitter Grid.Row="1" Height="5" HorizontalAlignment="Stretch" Background="#2D2D30"/>
                
                <!-- Middle Pane: Security Events -->
                <GroupBox Grid.Row="2" Header="Security Events" Padding="5" Margin="10">
                    <DataGrid x:Name="SecurityGrid" Background="Transparent" BorderThickness="0">
                        <DataGrid.ContextMenu>
                            <ContextMenu>
                                <MenuItem Header="Ask AI about this" Click="AskAi_Click"/>
                            </ContextMenu>
                        </DataGrid.ContextMenu>
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Time" Binding="{Binding Time}" Width="80"/>
                            <DataGridTextColumn Header="EventID" Binding="{Binding Id}" Width="60"/>
                            <DataGridTextColumn Header="Type" Binding="{Binding Type}" Width="110"/>
                            <DataGridTextColumn Header="Activity" Binding="{Binding Activity}" Width="100"/>
                            <DataGridTextColumn Header="Account" Binding="{Binding Account}" Width="*"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </GroupBox>
            </Grid>

            <!-- Tools Views -->
            <views:HostedNetworkView x:Name="HostedNetworkView" Visibility="Collapsed"/>
            <views:WanMiniportView x:Name="WanMiniportView" Visibility="Collapsed"/>
            <views:NetworkAdaptersView x:Name="NetworkAdaptersView" Visibility="Collapsed"/>
            <views:TasksView x:Name="TasksView" Visibility="Collapsed"/>
            <views:ConnectionsView x:Name="ConnectionsView" Visibility="Collapsed"/>
            <views:SettingsView x:Name="SettingsView" Visibility="Collapsed"/>


        </Grid>
    </Grid>
</Window>
