<Window x:Class="DeviceMonitorCS.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Windows System Monitor" Height="600" Width="1000" WindowStartupLocation="CenterScreen">
    <Window.Resources>
        <Style TargetType="DataGrid">
            <Setter Property="AutoGenerateColumns" Value="False"/>
            <Setter Property="CanUserAddRows" Value="False"/>
            <Setter Property="IsReadOnly" Value="True"/>
            <Setter Property="HeadersVisibility" Value="Column"/>
            <Setter Property="GridLinesVisibility" Value="Horizontal"/>
        </Style>
    </Window.Resources>
    <DockPanel>
        <!-- Toolbar -->
        <ToolBarTray DockPanel.Dock="Top">
            <ToolBar Band="0" BandIndex="0">
                <Button x:Name="HostedNetworkBtn" Content="Hosted Network" Margin="5"/>
                <Separator/>
                <Button x:Name="WanMiniportBtn" Content="WAN Miniports" Margin="5"/>
                <Separator/>
                <Button x:Name="NetworkAdaptersBtn" Content="Network Adapters" Margin="5"/>
                <Separator/>
                <Button x:Name="TasksBtn" Content="Scheduled Tasks" Margin="5"/>
                <Separator/>
                <Button x:Name="ConnectionsBtn" Content="Connections" Margin="5"/>
            </ToolBar>
            <ToolBar Band="1" BandIndex="0">
                <CheckBox x:Name="VpnToggle" Content="VPN Service" FontSize="14" VerticalAlignment="Center" Margin="5"/>
                <Separator/>
                <CheckBox x:Name="WifiDirectToggle" Content="WiFi Direct" FontSize="14" VerticalAlignment="Center" Margin="5"/>
                <Separator/>
                <CheckBox x:Name="DebugToggle" Content="Kernel Debug" FontSize="14" VerticalAlignment="Center" Margin="5"/>
                <Separator/>
                <Button x:Name="ClearBtn" Content="Clear Events" Margin="5"/>
            </ToolBar>
        </ToolBarTray>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="5"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            
            <!-- Top Pane: Device Events -->
            <GroupBox Grid.Row="0" Header="Device Events" Padding="5" Margin="5">
                <DataGrid x:Name="DeviceGrid">
                    <DataGrid.ContextMenu>
                        <ContextMenu>
                            <MenuItem Header="Ask AI about this" Click="AskAi_Click"/>
                        </ContextMenu>
                    </DataGrid.ContextMenu>
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Time" Binding="{Binding Time}" Width="80"/>
                        <DataGridTextColumn Header="Event" Binding="{Binding EventType}" Width="80"/>
                        <DataGridTextColumn Header="Device Name" Binding="{Binding Name}" Width="150"/>
                        <DataGridTextColumn Header="Type" Binding="{Binding Type}" Width="100"/>
                        <DataGridTextColumn Header="Initiator" Binding="{Binding Initiator}" Width="*"/>
                    </DataGrid.Columns>
                </DataGrid>
            </GroupBox>

            <!-- Resizable Splitter 1 -->
            <GridSplitter Grid.Row="1" Height="5" HorizontalAlignment="Stretch" Background="LightGray"/>
            
            <!-- Middle Pane: Security Events -->
            <GroupBox Grid.Row="2" Header="Security Events" Padding="5" Margin="5">
                <DataGrid x:Name="SecurityGrid">
                    <DataGrid.ContextMenu>
                        <ContextMenu>
                            <MenuItem Header="Ask AI about this" Click="AskAi_Click"/>
                        </ContextMenu>
                    </DataGrid.ContextMenu>
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Time" Binding="{Binding Time}" Width="80"/>
                        <DataGridTextColumn Header="EventID" Binding="{Binding Id}" Width="60"/>
                        <DataGridTextColumn Header="Type" Binding="{Binding Type}" Width="110"/>
                        <DataGridTextColumn Header="Activity" Binding="{Binding Activity}" Width="100"/>
                        <DataGridTextColumn Header="Account" Binding="{Binding Account}" Width="*"/>
                    </DataGrid.Columns>
                </DataGrid>
            </GroupBox>
        </Grid>
    </DockPanel>
</Window>
